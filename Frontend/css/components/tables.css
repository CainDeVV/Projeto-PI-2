/* css/components/tables.css */

/* --- DEFINIÇÃO DOS GRIDS (Desktop) --- */
:root {
    /* EQUIPAMENTOS (11 Colunas agora) 
       1. Icon (40px)
       2. # (60px)
       3. Série (140px) - Reduzi um pouco para caber a sala
       4. Modelo (1.5fr)
       5. Sala (1.2fr) - NOVA COLUNA
       6. Usuário (1.2fr)
       7. Status (90px)
       8. Setor (110px)
       9. Cont (90px)
       10. Ton (80px)
       11. Erro (1fr)
    */
    --grid-equip: 40px 60px 140px 1.5fr 1.2fr 1.2fr 90px 110px 90px 80px 1fr;

    /* USUÁRIOS (5 Colunas) */
    --grid-users: 60px 2fr 1.2fr 150px 1.2fr;

    /* --- CORREÇÃO AQUI (9 COLUNAS AGORA) --- 
       1. Status (30px)
       2. ID (50px)
       3. Equipamento (1.2fr - Flexível)
       4. Defeito (1.5fr - Maior espaço)
       5. Solicitante (1fr)
       6. Responsável (1fr)
       7. Setor (110px - Fixo para não empurrar)
       8. Abertura (90px)
       9. Fechamento (90px)
    */
    --grid-os: 30px 50px 1.2fr 1.5fr 1fr 1fr 110px 90px 90px;

    /* SETORES (3 Colunas: Nome(flex) | Empresa(flex) | Cidade(150px)) */
    --grid-sectors: 1.5fr 1.5fr 150px;
}

/* --- ESTRUTURA GERAL --- */
.table-content, .inner-table-content {
    flex: 1;
    overflow-y: auto;
    background-color: var(--bg-surface);
    
    /* MUDAR DE 10px PARA 0 */
    padding-left: 0; 
}

/* --- HEADER E LINHAS (GRID SYSTEM) --- */

/* 1. EQUIPAMENTOS e TABELA INTERNA */
/* Adicionei as classes compostas .equip-grid.user-row para garantir especificidade se o JS adicionar ambas */
.equip-grid, 
.inner-table-header, 
.user-row.equip-grid,
.inner-table-row.equip-grid,
#equipment-list .user-row, 
#inner-list .inner-table-row {
    display: grid;
    grid-template-columns: var(--grid-equip);
    align-items: center;
    padding-left: 10px;
    padding-right: 8px;
}

/* 2. USUÁRIOS */
/* Adicionei .user-row.users-grid */
.users-grid, 
.user-row.users-grid,
#users-list .user-row {
    display: grid;
    grid-template-columns: var(--grid-users);
    align-items: center;
    padding-left: 10px;
    padding-right: 8px;
}

/* 3. OS */
.os-grid, 
.user-row.os-grid,
#os-list .user-row {
    display: grid;
    grid-template-columns: var(--grid-os);
    align-items: center;
    padding-left: 10px;
    padding-right: 8px;
}

/* 3. Setor */
.sectors-grid, 
.user-row.sectors-grid,
#sectors-list .user-row {
    display: grid;
    grid-template-columns: var(--grid-sectors);
    align-items: center;
    padding-left: 10px;
    padding-right: 8px;
}

/* --- ESTILOS VISUAIS --- */

/* CABEÇALHO PRINCIPAL */
.table-header {
    height: 44px;
    background-color: var(--brand-primary);
    color: var(--text-inverse);
    font-weight: bold;
    font-size: 14px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    white-space: nowrap;
}

/* CABEÇALHO INTERNO (Aba Impressoras) */
.inner-table-header {
    height: 44px;
    background-color: var(--brand-active);
    color: var(--text-inverse);
    font-weight: bold;
    font-size: 14px;
    white-space: nowrap;
    border-radius: 0; 
}

/* LINHAS */
.user-row, .inner-table-row {
    min-height: 44px;
    border-bottom: 1px solid var(--border-light);
    cursor: pointer;
    font-size: 13px;
    color: var(--text-primary);
    transition: background 0.1s;
}

.user-row:hover, .inner-table-row:hover { background-color: var(--bg-row-hover); }
.user-row.selected { background-color: var(--brand-hover-light); box-shadow: inset 4px 0 0 var(--brand-active); }

/* --- CÉLULAS --- */
.th-col {
    text-align: left;
    padding: 0 5px; 
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* --- REGRAS ESPECÍFICAS DE ALINHAMENTO --- */

/* 1. Coluna # (ID) - Coluna 2 */
.equip-grid .th-col:nth-child(2), 
.inner-table-header .th-col:nth-child(2) {
    text-align: center !important;
}

#equipment-list .user-row .th-col:nth-child(2),
#inner-list .inner-table-row .th-col:nth-child(2) {
    text-align: left !important;
    padding-left: 20px;
}

/* 2. Coluna Ícone - Coluna 1 */
.equip-grid .th-col:nth-child(1),
#equipment-list .user-row .th-col:nth-child(1),
#inner-list .inner-table-row .th-col:nth-child(1) {
    text-align: center !important;
    padding: 0;
}

#empty-state { padding: 40px; color: var(--text-muted); text-align: center; }


/* ==========================================================================
   MOBILE CARD LAYOUT
   ========================================================================== */

@media (max-width: 900px) {
    
    .table-header, .inner-table-header { display: none !important; }
    .table-content, .inner-table-content { padding: 10px; background-color: var(--bg-body); }

    .user-row, .inner-table-row {
        display: block; 
        background: #fff;
        border: 1px solid var(--border-medium);
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 10px;
        height: auto;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        position: relative;
    }

    .th-col { width: auto; text-align: left !important; white-space: normal; overflow: visible; padding: 0; }

    /* CARD EQUIPAMENTO */
    #equipment-list .user-row, #inner-list .inner-table-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr; 
        grid-row-gap: 2px;
        grid-column-gap: 8px;
    }

    #equipment-list .th-col:nth-child(4) { grid-row: 1; grid-column: 1 / 3; font-weight: bold; font-size: 13px; color: var(--text-primary); line-height: 1.2; }
    #equipment-list .th-col:nth-child(1) { grid-row: 1; grid-column: 3; text-align: right !important; font-size: 16px; color: var(--brand-active); }
    #equipment-list .th-col:nth-child(3) { grid-row: 2; grid-column: 1 / -1; font-size: 11px; color: var(--text-secondary); padding-bottom: 4px; margin-bottom: 4px; border-bottom: 1px solid #eee; }
    #equipment-list .th-col:nth-child(5) { grid-row: 3; grid-column: 1 / 3; font-size: 12px; font-weight: 500; }
    #equipment-list .th-col:nth-child(7) { grid-row: 3; grid-column: 3; text-align: right !important; font-size: 11px; color: var(--text-muted); }
    #equipment-list .th-col:nth-child(8) { grid-row: 4; grid-column: 1; font-size: 11px; color: var(--text-secondary); margin-top: 3px; }
    #equipment-list .th-col:nth-child(9) { grid-row: 4; grid-column: 2; font-size: 11px; color: var(--text-secondary); margin-top: 3px; text-align: center !important; }
    #equipment-list .th-col:nth-child(6) { grid-row: 4; grid-column: 3; font-size: 11px; margin-top: 3px; text-align: right !important; }
    #equipment-list .th-col:nth-child(10) { grid-row: 5; grid-column: 1 / -1; font-size: 11px; margin-top: 2px; }

    #equipment-list .th-col:nth-child(2) { display: none; }
    /* A pseudo-elemento ::before pode causar problemas se não estiver configurado corretamente no JS, removendo para segurança */
    #equipment-list .th-col::before { display: none; }

    /* CARD USUÁRIO */
    #users-list .user-row { display: grid; grid-template-columns: 1fr 1fr; grid-row-gap: 3px; }
    #users-list .th-col:nth-child(2) { grid-row: 1; grid-column: 1 / -1; font-size: 15px; font-weight: bold; color: var(--text-primary); margin-bottom: 2px; }
    #users-list .th-col:nth-child(3) { grid-row: 2; grid-column: 1; font-size: 13px; color: var(--text-secondary); text-align: left !important; }
    #users-list .th-col:nth-child(4) { grid-row: 2; grid-column: 2; font-size: 13px; font-weight: 500; color: var(--brand-active); text-align: right !important; }
    #users-list .th-col:nth-child(5) { grid-row: 3; grid-column: 1 / -1; font-size: 12px; color: var(--text-muted); margin-top: 3px; padding-top: 3px; border-top: 1px dashed #eee; }
    #users-list .th-col::before { content: none !important; display: none !important; }
    #users-list .th-col:nth-child(1) { display: none; }
}