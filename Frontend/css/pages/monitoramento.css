/* ==========================================================================
   1. CONFIGURAÇÕES GERAIS (Variáveis e Grid)
   ========================================================================== */
:root {
    /* Definição das colunas: 
       Sev(100px) | Data(140px) | Equip(1.2fr) | Sala(1fr) | Erro(1.5fr) | Ações(100px) */
    --grid-monitor: 100px 140px 1.2fr 1fr 1.5fr 100px;
}

/* ==========================================================================
   2. LAYOUT DESKTOP (MODO TELA CHEIA)
   ========================================================================== */
@media (min-width: 901px) {
    body.layout-full-width #app-sidebar {
        display: none !important;
    }

    body.layout-full-width #app-main {
        left: var(--gap-side) !important;
        right: var(--gap-side) !important;
        width: auto !important;
        max-width: 100% !important;
        top: calc(var(--header-height) + var(--gap-top)) !important;
    }
}

/* ==========================================================================
   3. ESTILOS DA TABELA (Estrutura e Células)
   ========================================================================== */
.monitor-grid,
.user-row.monitor-grid {
    display: grid;
    grid-template-columns: var(--grid-monitor);
    align-items: center;
    padding-left: 20px;
    padding-right: 10px;
}

/* Garante que a linha dentro da lista siga o grid */
#monitor-list .user-row {
    display: grid;
    grid-template-columns: var(--grid-monitor);
}

/* --- BADGES DE SEVERIDADE --- */
.sev-badge {
    padding: 5px 10px;
    border-radius: 4px;
    font-weight: bold;
    font-size: 11px;
    text-transform: uppercase;
    text-align: center;
    display: inline-block;
    width: 80px;
}

.sev-critico { background-color: #ffebee; color: #c62828; border: 1px solid #ffcdd2; }
.sev-alerta  { background-color: #fffde7; color: #f9a825; border: 1px solid #fff9c4; }
.sev-info    { background-color: #e3f2fd; color: #1565c0; border: 1px solid #bbdefb; }

/* --- TIPOGRAFIA DO ERRO --- */
.error-title { 
    font-weight: 700; 
    color: var(--text-primary); 
    display: flex;
    align-items: center;
    gap: 8px; 
    margin-bottom: 4px;
}

/* Etiqueta cinza do código */
.error-code-tag {
    background-color: #f0f0f0;
    color: #666;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 1px 6px;
    font-size: 10px;
    font-family: monospace;
    font-weight: normal;
    white-space: nowrap;
}

.error-desc { 
    font-size: 12px; 
    color: var(--text-muted); 
    display: block; 
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    line-height: 1.2;
}

/* --- BOTÕES DE AÇÃO --- */
.monitor-actions {
    display: flex;
    gap: 6px;
    justify-content: center;
}

.btn-monitor {
    border: none;
    width: 34px;  /* Botão Quadrado */
    height: 34px;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.btn-monitor i { font-size: 14px; }

/* Cores */
.btn-monitor.os { background-color: #6c5ce7; color: white; }
.btn-monitor.os:hover { background-color: #5b4cc4; transform: translateY(-2px); }

.btn-monitor.solve { background-color: var(--status-success); color: white; }
.btn-monitor.solve:hover { background-color: #006400; transform: translateY(-2px); }

.btn-monitor.view {
    width: auto;
    padding: 0 10px;
    background-color: #f0f0f0;
    color: #555;
    border: 1px solid #ccc;
    font-size: 11px;
    font-weight: bold;
    box-shadow: none;
}
.btn-monitor.view:hover { background-color: #e0e0e0; }


/* ==========================================================================
   4. LAYOUT MOBILE (CARD FINAL OTIMIZADO)
   ========================================================================== */
@media (max-width: 900px) {
    /* Usa o ID (#monitor-list) para ter prioridade máxima sobre qualquer outra regra */
    #monitor-list .user-row.monitor-grid {
        display: grid !important;
        grid-template-columns: 1fr auto !important;
        padding: 12px !important;       /* Garante padding uniforme */
        padding-left: 12px !important;  /* Força a esquerda */
        margin-left: 0 !important;      /* Garante margem zero */
        width: 100% !important;         /* Ocupa tudo */
        box-sizing: border-box !important;
    }
    
    /* Garante que a coluna Severidade não tenha margem esquerda invisível */
    #monitor-list .user-row.monitor-grid > div:nth-child(1) {
        margin-left: 0 !important;
        padding-left: 0 !important;
    }
    
    .table-header.monitor-grid { display: none; }
    
    /* Configuração do Card */
    .user-row.monitor-grid {
        display: grid !important;
        /* Coluna da esquerda (Flexível) | Coluna da direita (Auto/Data) */
        grid-template-columns: 1fr auto; 
        grid-template-areas:
            "sev  date"
            "err  err"
            "eq   room"
            "actions actions" !important;
        
        /* CORREÇÃO DO ESPAÇO VAZIO NA ESQUERDA */
        padding: 10px 12px !important; /* Remove o padding de 20px do desktop */
        padding-left: 12px !important; /* Garante que não sobrescreva */
        
        gap: 6px; /* Gap pequeno entre linhas */
        margin-bottom: 8px;
        
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        height: auto !important;
        
        /* Largura total disponível */
        width: auto;
        max-width: 100%;
        margin-left: 0; 
        margin-right: 0;
    }

    .user-row.monitor-grid > div { text-align: left; }

    /* 1. SEVERIDADE (Badge) */
    .user-row.monitor-grid > div:nth-child(1) {
        grid-area: sev;
        justify-self: start;
        /* Remove margin extra se houver */
        margin: 0;
    }
    .user-row.monitor-grid > div:nth-child(1) .sev-badge {
        font-size: 9px;
        padding: 2px 8px;
        width: auto; /* Tamanho natural do texto */
        min-width: 0;
    }

    /* 2. DATA (Topo Direita) */
    .user-row.monitor-grid > div:nth-child(2) {
        grid-area: date;
        justify-self: end;
        font-size: 0.75rem;
        color: #888;
        align-self: center;
        white-space: nowrap;
    }

    /* 3. EQUIPAMENTO (Quebra de linha ativada) */
    .user-row.monitor-grid > div:nth-child(3) {
        grid-area: eq;
        font-size: 0.8rem;
        font-weight: 700;
        color: #444;
        
        /* Força quebra de linha se for muito longo */
        white-space: normal;
        word-wrap: break-word;
        line-height: 1.25;
        
        padding-right: 5px;
        margin-top: 4px;
        padding-top: 6px;
        border-top: 1px solid #f5f5f5;
    }
    .user-row.monitor-grid > div:nth-child(3)::before { display: none; }

    /* 4. SALA (Direita) */
    .user-row.monitor-grid > div:nth-child(4) {
        grid-area: room;
        justify-self: end;
        text-align: right;
        font-size: 0.8rem;
        color: #666;
        
        margin-top: 4px;
        padding-top: 6px;
        border-top: 1px solid #f5f5f5;
        align-self: start;
    }
    .user-row.monitor-grid > div:nth-child(4)::before { display: none; }

    /* 5. ERRO (Centro) */
    .user-row.monitor-grid > div:nth-child(5) {
        grid-area: err;
        margin-bottom: 2px;
    }
    .user-row.monitor-grid > div:nth-child(5) .error-title {
        font-size: 0.95rem;
        margin-bottom: 2px;
    }
    /* Etiqueta do código pequena */
    .user-row.monitor-grid > div:nth-child(5) .error-code-tag {
        font-size: 9px;
        padding: 1px 4px;
        margin-top: 2px;
        border: none;
        background: #f5f5f5;
    }
    .user-row.monitor-grid > div:nth-child(5) .error-desc {
        font-size: 0.8rem;
        line-height: 1.3;
        white-space: normal;
        color: #666;
    }

    /* 6. AÇÕES (Botões) */
    .user-row.monitor-grid > div:nth-child(6) {
        grid-area: actions;
        margin-top: 8px;
        padding-top: 8px;
        border-top: 1px dashed #eee;
    }
    
    .btn-monitor {
        flex: 1;
        height: 36px;
        border-radius: 6px;
        /* Remove sombra excessiva no mobile */
        box-shadow: none;
        border: 1px solid transparent;
    }
    
    /* Borda sutil no botão view para contraste */
    .btn-monitor.view { border-color: #ddd; }
}